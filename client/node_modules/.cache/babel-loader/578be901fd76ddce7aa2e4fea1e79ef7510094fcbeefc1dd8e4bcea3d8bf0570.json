{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../context/AuthContext';import{useNavigate,Link}from'react-router-dom';import orderService from'../services/orderService';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const Dashboard=()=>{var _user$name,_orderStats$statusBre,_orderStats$statusBre2,_orderStats$statusBre3;const{user,logout}=useAuth();const navigate=useNavigate();const[orderStats,setOrderStats]=useState(null);const[recentOrders,setRecentOrders]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchDashboardData();},[]);const fetchDashboardData=async()=>{try{// Fetch order statistics\nconst statsResult=await orderService.getOrderStats();if(statsResult.success){setOrderStats(statsResult.data);}// Fetch recent orders\nconst ordersResult=await orderService.getOrders({limit:5});if(ordersResult.success){setRecentOrders(ordersResult.data);}}catch(error){console.error('Error fetching dashboard data:',error);}finally{setLoading(false);}};const handleLogout=()=>{logout();navigate('/');};const formatPrice=price=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(price);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:[\"Welcome back, \",user===null||user===void 0?void 0:user.name,\"!\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 capitalize\",children:[user===null||user===void 0?void 0:user.role,\" Dashboard\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded\",children:\"Logout\"})]})})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-6 sm:px-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold text-lg\",children:user===null||user===void 0?void 0:(_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.charAt(0).toUpperCase()})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 truncate\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-lg font-medium text-gray-900\",children:user===null||user===void 0?void 0:user.name})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 px-5 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Email: \",user===null||user===void 0?void 0:user.email]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 capitalize\",children:[\"Role: \",user===null||user===void 0?void 0:user.role]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Quick Actions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:(user===null||user===void 0?void 0:user.role)==='client'?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Link,{to:\"/orders\",className:\"block w-full text-left px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-md\",children:\"View My Orders\"}),/*#__PURE__*/_jsx(Link,{to:\"/gigs\",className:\"block w-full text-left px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-md\",children:\"Browse Services\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(Link,{to:\"/orders\",className:\"block w-full text-left px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-md\",children:\"View My Work\"}),/*#__PURE__*/_jsx(Link,{to:\"/create-gig\",className:\"block w-full text-left px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-md\",children:\"Create New Gig\"}),/*#__PURE__*/_jsx(Link,{to:\"/my-gigs\",className:\"block w-full text-left px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-md\",children:\"Manage My Gigs\"})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Statistics\"}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"animate-pulse space-y-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded\"})]}):orderStats?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Total Orders:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:orderStats.totals.totalOrders})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:(user===null||user===void 0?void 0:user.role)==='client'?'Total Spent:':'Total Earned:'}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-green-600\",children:formatPrice(orderStats.totals.totalRevenue)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Active Orders:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:(((_orderStats$statusBre=orderStats.statusBreakdown.paid)===null||_orderStats$statusBre===void 0?void 0:_orderStats$statusBre.count)||0)+(((_orderStats$statusBre2=orderStats.statusBreakdown.in_progress)===null||_orderStats$statusBre2===void 0?void 0:_orderStats$statusBre2.count)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Completed:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-green-600\",children:((_orderStats$statusBre3=orderStats.statusBreakdown.completed)===null||_orderStats$statusBre3===void 0?void 0:_orderStats$statusBre3.count)||0})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Total Orders:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:(user===null||user===void 0?void 0:user.role)==='client'?'Total Spent:':'Total Earned:'}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"$0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Active Orders:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"0\"})]})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Recent Orders\"}),recentOrders.length>0&&/*#__PURE__*/_jsx(Link,{to:\"/orders\",className:\"text-sm text-blue-600 hover:text-blue-500\",children:\"View all \\u2192\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"animate-pulse space-y-4\",children:[1,2,3].map(i=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-12 w-12 bg-gray-200 rounded-lg\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 space-y-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded w-3/4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-3 bg-gray-200 rounded w-1/2\"})]})]},i))}):recentOrders.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:recentOrders.map(order=>{var _order$gig,_order$gig$title,_order$gig2,_order$freelancer,_order$client;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-bold text-sm\",children:(_order$gig=order.gig)===null||_order$gig===void 0?void 0:(_order$gig$title=_order$gig.title)===null||_order$gig$title===void 0?void 0:_order$gig$title.charAt(0).toUpperCase()})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 truncate\",children:(_order$gig2=order.gig)===null||_order$gig2===void 0?void 0:_order$gig2.title}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 px-2 py-1 text-xs font-medium rounded-full \".concat(orderService.getStatusColor(order.status)),children:orderService.getStatusText(order.status)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:(user===null||user===void 0?void 0:user.role)==='client'?(_order$freelancer=order.freelancer)===null||_order$freelancer===void 0?void 0:_order$freelancer.name:(_order$client=order.client)===null||_order$client===void 0?void 0:_order$client.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-green-600\",children:formatPrice(order.amount)})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 mt-1\",children:new Date(order.createdAt).toLocaleDateString()})]})]},order._id);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No orders yet.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm mt-2\",children:(user===null||user===void 0?void 0:user.role)==='client'?'Start by browsing available services and placing your first order.':'Create attractive gigs to start receiving orders from clients.'}),/*#__PURE__*/_jsx(Link,{to:\"/gigs\",className:\"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",children:(user===null||user===void 0?void 0:user.role)==='client'?'Browse Services':'View Available Gigs'})]})]})})})]})})]});};export default Dashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}