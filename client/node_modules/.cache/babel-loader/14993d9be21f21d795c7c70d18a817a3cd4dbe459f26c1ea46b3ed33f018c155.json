{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{useGigs}from'../context/GigContext';import{useAuth}from'../context/AuthContext';import{getImageUrl}from'../utils/imageUtils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyGigs=()=>{const{myGigs,loading,error,getMyGigs,deleteGig}=useGigs();const{user}=useAuth();const[isDeleting,setIsDeleting]=useState(null);useEffect(()=>{if(user&&user.role==='freelancer'){getMyGigs();}},[user,getMyGigs]);// Added getMyGigs back since it's now stable\nconst handleDelete=async id=>{if(window.confirm('Are you sure you want to delete this gig?')){setIsDeleting(id);const result=await deleteGig(id);if(result.success){// Refresh the list\ngetMyGigs();}setIsDeleting(null);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xl\",children:\"Loading your gigs...\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-6 sm:px-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"My Gigs\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-x-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/create-gig\",className:\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",children:\"Create New Gig\"}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded\",children:\"Dashboard\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-md p-4 mb-6\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error})}),myGigs.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"No gigs created yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-8\",children:\"Start by creating your first gig to attract clients.\"}),/*#__PURE__*/_jsx(Link,{to:\"/create-gig\",className:\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",children:\"Create Your First Gig\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:myGigs.map(gig=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:[gig.images&&gig.images.length>0&&/*#__PURE__*/_jsx(\"img\",{className:\"h-48 w-full object-cover\",src:getImageUrl(gig.images[0]),alt:gig.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:gig.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-4 line-clamp-3\",children:gig.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-bold text-green-600\",children:[\"$\",gig.price]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:gig.category})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[\"Delivery: \",gig.deliveryTime,\" days\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-x-2\",children:[/*#__PURE__*/_jsx(Link,{to:\"/gigs/\".concat(gig._id,\"/edit\"),className:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(gig._id),disabled:isDeleting===gig._id,className:\"text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50\",children:isDeleting===gig._id?'Deleting...':'Delete'})]})]})]})]},gig._id))})]})})});};export default MyGigs;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}