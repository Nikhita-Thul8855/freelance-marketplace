{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\freelance-marketplace\\\\client\\\\src\\\\components\\\\RealTimeChat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport socketService from '../services/socketService';\nimport messageService from '../services/messageService';\nimport './RealTimeChat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RealTimeChat = ({\n  otherUser,\n  onClose\n}) => {\n  _s();\n  const {\n    user,\n    token\n  } = useAuth();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [otherUserTyping, setOtherUserTyping] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState('disconnected');\n  const [sending, setSending] = useState(false);\n  const messagesEndRef = useRef(null);\n  const typingTimeoutRef = useRef(null);\n\n  // Auto scroll to bottom\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Initialize socket connection and load messages\n  useEffect(() => {\n    if (!user || !otherUser || !token) return;\n    console.log('üöÄ Initializing real-time chat...');\n    console.log('Current user:', user.name);\n    console.log('Other user:', otherUser.name);\n\n    // Connect to socket\n    try {\n      socketService.connect(token);\n\n      // Join conversation room\n      socketService.joinConversation(otherUser._id);\n\n      // Load existing messages\n      loadMessages();\n\n      // Setup event listeners\n      setupSocketListeners();\n    } catch (error) {\n      console.error('‚ùå Failed to initialize chat:', error);\n      setConnectionStatus('error');\n    }\n    return () => {\n      // Cleanup\n      socketService.leaveConversation(otherUser._id);\n      cleanupSocketListeners();\n    };\n  }, [user, otherUser, token]);\n\n  // Load existing messages\n  const loadMessages = async () => {\n    try {\n      console.log('üì• Loading existing messages...');\n      const result = await messageService.getConversationMessages(otherUser._id);\n      if (result.success) {\n        console.log('‚úÖ Messages loaded:', result.data.length);\n        setMessages(result.data || []);\n      } else {\n        console.error('‚ùå Failed to load messages:', result.error);\n      }\n    } catch (error) {\n      console.error('‚ùå Error loading messages:', error);\n    }\n  };\n\n  // Setup socket event listeners\n  const setupSocketListeners = () => {\n    // Connection status\n    socketService.on('connected', () => {\n      console.log('‚úÖ Chat connected');\n      setConnectionStatus('connected');\n    });\n    socketService.on('disconnected', () => {\n      console.log('üî¥ Chat disconnected');\n      setConnectionStatus('disconnected');\n    });\n    socketService.on('connect_error', () => {\n      console.log('‚ùå Chat connection error');\n      setConnectionStatus('error');\n    });\n\n    // New messages\n    socketService.on('new-message', data => {\n      console.log('üì® Received new message:', data);\n      if (data.success && data.message) {\n        setMessages(prev => {\n          // Check if message already exists to avoid duplicates\n          const messageId = data.message._id || data.message.messageId;\n          if (!messageId) {\n            console.warn('‚ö†Ô∏è Received message without ID:', data.message);\n            return prev;\n          }\n          const exists = prev.some(msg => msg && (msg._id === messageId || msg.messageId === messageId));\n          if (exists) return prev;\n          return [...prev, data.message];\n        });\n      }\n    });\n\n    // Typing indicators\n    socketService.on('user-typing', data => {\n      if (data.userId === otherUser._id) {\n        console.log('‚å®Ô∏è Other user is typing');\n        setOtherUserTyping(true);\n      }\n    });\n    socketService.on('user-stop-typing', data => {\n      if (data.userId === otherUser._id) {\n        console.log('‚å®Ô∏è Other user stopped typing');\n        setOtherUserTyping(false);\n      }\n    });\n\n    // Message read receipts\n    socketService.on('message-read', data => {\n      console.log('‚úÖ Message read receipt:', data);\n      setMessages(prev => prev.map(msg => msg._id === data.messageId ? {\n        ...msg,\n        status: 'read',\n        readAt: data.readAt\n      } : msg));\n    });\n  };\n\n  // Cleanup socket listeners\n  const cleanupSocketListeners = () => {\n    socketService.off('connected');\n    socketService.off('disconnected');\n    socketService.off('connect_error');\n    socketService.off('new-message');\n    socketService.off('user-typing');\n    socketService.off('user-stop-typing');\n    socketService.off('message-read');\n  };\n\n  // Handle sending messages\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!newMessage.trim() || sending) return;\n    const messageContent = newMessage.trim();\n    setNewMessage('');\n    setSending(true);\n    try {\n      console.log('üì§ Sending message via Socket.io...');\n\n      // Send via socket for real-time delivery\n      if (socketService.isConnected()) {\n        await socketService.sendMessage(otherUser._id, messageContent);\n        console.log('‚úÖ Message sent via Socket.io');\n      } else {\n        // Fallback to HTTP API\n        console.log('üì° Socket not connected, using HTTP API...');\n        const result = await messageService.sendMessage(otherUser._id, messageContent);\n        if (result.success) {\n          setMessages(prev => [...prev, result.data]);\n        } else {\n          throw new Error(result.error);\n        }\n      }\n\n      // Stop typing\n      socketService.stopTyping(otherUser._id);\n      setIsTyping(false);\n    } catch (error) {\n      console.error('‚ùå Failed to send message:', error);\n      // Restore message on error\n      setNewMessage(messageContent);\n      alert('Failed to send message. Please try again.');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  // Handle typing indicators\n  const handleTyping = e => {\n    setNewMessage(e.target.value);\n    if (!isTyping && e.target.value.trim()) {\n      setIsTyping(true);\n      socketService.startTyping(otherUser._id);\n    }\n\n    // Clear existing timeout\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n\n    // Set new timeout\n    typingTimeoutRef.current = setTimeout(() => {\n      if (isTyping) {\n        setIsTyping(false);\n        socketService.stopTyping(otherUser._id);\n      }\n    }, 2000);\n  };\n\n  // Format message time\n  const formatTime = dateString => {\n    const date = new Date(dateString);\n    return date.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Get connection status display\n  const getConnectionStatusDisplay = () => {\n    switch (connectionStatus) {\n      case 'connected':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-connected\",\n          children: \"\\uD83D\\uDFE2 Real-time\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 16\n        }, this);\n      case 'disconnected':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-disconnected\",\n          children: \"\\uD83D\\uDD34 Disconnected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 16\n        }, this);\n      case 'error':\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-error\",\n          children: \"\\u274C Connection Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-connecting\",\n          children: \"\\uD83D\\uDFE1 Connecting...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"realtime-chat\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: otherUser.avatar || '/default-avatar.png',\n          alt: otherUser.name,\n          className: \"user-avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: otherUser.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"user-role\",\n            children: otherUser.role\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-status\",\n        children: getConnectionStatusDisplay()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-btn\",\n        onClick: onClose,\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-messages\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Start your conversation with \", otherUser.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }, this) : messages.filter(message => message && (message._id || message.messageId)).map(message => {\n        var _message$senderId, _message$sender;\n        // Safe way to get sender ID with null checks\n        const senderId = ((_message$senderId = message.senderId) === null || _message$senderId === void 0 ? void 0 : _message$senderId._id) || message.senderId || ((_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender._id) || message.sender;\n        const isSentByMe = senderId === user.id || senderId === user._id;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message ${isSentByMe ? 'sent' : 'received'}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: message.content || 'Message content unavailable'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-meta\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-time\",\n                children: formatTime(message.createdAt || message.timestamp)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 21\n              }, this), isSentByMe ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `message-status ${message.status || 'sent'}`,\n                children: message.status === 'read' ? '‚úì‚úì' : '‚úì'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 23\n              }, this) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 17\n          }, this)\n        }, message._id || message.messageId || Math.random(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 15\n        }, this);\n      }), otherUserTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"typing-indicator\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"typing-dots\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [otherUser.name, \" is typing...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"message-form\",\n      onSubmit: handleSendMessage,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: newMessage,\n          onChange: handleTyping,\n          placeholder: \"Type your message...\",\n          disabled: sending,\n          className: \"message-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: !newMessage.trim() || sending,\n          className: \"send-btn\",\n          children: sending ? '‚è≥' : 'üì§'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 241,\n    columnNumber: 5\n  }, this);\n};\n_s(RealTimeChat, \"ugUO0sHd7QGys9BLJGkfbzOc3Mc=\", false, function () {\n  return [useAuth];\n});\n_c = RealTimeChat;\nexport default RealTimeChat;\nvar _c;\n$RefreshReg$(_c, \"RealTimeChat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useAuth","socketService","messageService","jsxDEV","_jsxDEV","RealTimeChat","otherUser","onClose","_s","user","token","messages","setMessages","newMessage","setNewMessage","isTyping","setIsTyping","otherUserTyping","setOtherUserTyping","connectionStatus","setConnectionStatus","sending","setSending","messagesEndRef","typingTimeoutRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","console","log","name","connect","joinConversation","_id","loadMessages","setupSocketListeners","error","leaveConversation","cleanupSocketListeners","result","getConversationMessages","success","data","length","on","message","prev","messageId","warn","exists","some","msg","userId","map","status","readAt","off","handleSendMessage","e","preventDefault","trim","messageContent","isConnected","sendMessage","Error","stopTyping","alert","handleTyping","target","value","startTyping","clearTimeout","setTimeout","formatTime","dateString","date","Date","toLocaleTimeString","hour","minute","getConnectionStatusDisplay","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","avatar","alt","role","onClick","filter","_message$senderId","_message$sender","senderId","sender","isSentByMe","id","content","createdAt","timestamp","Math","random","ref","onSubmit","type","onChange","placeholder","disabled","_c","$RefreshReg$"],"sources":["C:/Users/PC/freelance-marketplace/client/src/components/RealTimeChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport socketService from '../services/socketService';\r\nimport messageService from '../services/messageService';\r\nimport './RealTimeChat.css';\r\n\r\nconst RealTimeChat = ({ otherUser, onClose }) => {\r\n  const { user, token } = useAuth();\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [otherUserTyping, setOtherUserTyping] = useState(false);\r\n  const [connectionStatus, setConnectionStatus] = useState('disconnected');\r\n  const [sending, setSending] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n  const typingTimeoutRef = useRef(null);\r\n\r\n  // Auto scroll to bottom\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // Initialize socket connection and load messages\r\n  useEffect(() => {\r\n    if (!user || !otherUser || !token) return;\r\n\r\n    console.log('üöÄ Initializing real-time chat...');\r\n    console.log('Current user:', user.name);\r\n    console.log('Other user:', otherUser.name);\r\n\r\n    // Connect to socket\r\n    try {\r\n      socketService.connect(token);\r\n      \r\n      // Join conversation room\r\n      socketService.joinConversation(otherUser._id);\r\n\r\n      // Load existing messages\r\n      loadMessages();\r\n\r\n      // Setup event listeners\r\n      setupSocketListeners();\r\n\r\n    } catch (error) {\r\n      console.error('‚ùå Failed to initialize chat:', error);\r\n      setConnectionStatus('error');\r\n    }\r\n\r\n    return () => {\r\n      // Cleanup\r\n      socketService.leaveConversation(otherUser._id);\r\n      cleanupSocketListeners();\r\n    };\r\n  }, [user, otherUser, token]);\r\n\r\n  // Load existing messages\r\n  const loadMessages = async () => {\r\n    try {\r\n      console.log('üì• Loading existing messages...');\r\n      const result = await messageService.getConversationMessages(otherUser._id);\r\n      \r\n      if (result.success) {\r\n        console.log('‚úÖ Messages loaded:', result.data.length);\r\n        setMessages(result.data || []);\r\n      } else {\r\n        console.error('‚ùå Failed to load messages:', result.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('‚ùå Error loading messages:', error);\r\n    }\r\n  };\r\n\r\n  // Setup socket event listeners\r\n  const setupSocketListeners = () => {\r\n    // Connection status\r\n    socketService.on('connected', () => {\r\n      console.log('‚úÖ Chat connected');\r\n      setConnectionStatus('connected');\r\n    });\r\n\r\n    socketService.on('disconnected', () => {\r\n      console.log('üî¥ Chat disconnected');\r\n      setConnectionStatus('disconnected');\r\n    });\r\n\r\n    socketService.on('connect_error', () => {\r\n      console.log('‚ùå Chat connection error');\r\n      setConnectionStatus('error');\r\n    });\r\n\r\n    // New messages\r\n    socketService.on('new-message', (data) => {\r\n      console.log('üì® Received new message:', data);\r\n      if (data.success && data.message) {\r\n        setMessages(prev => {\r\n          // Check if message already exists to avoid duplicates\r\n          const messageId = data.message._id || data.message.messageId;\r\n          if (!messageId) {\r\n            console.warn('‚ö†Ô∏è Received message without ID:', data.message);\r\n            return prev;\r\n          }\r\n          \r\n          const exists = prev.some(msg => \r\n            msg && (msg._id === messageId || msg.messageId === messageId)\r\n          );\r\n          if (exists) return prev;\r\n          \r\n          return [...prev, data.message];\r\n        });\r\n      }\r\n    });\r\n\r\n    // Typing indicators\r\n    socketService.on('user-typing', (data) => {\r\n      if (data.userId === otherUser._id) {\r\n        console.log('‚å®Ô∏è Other user is typing');\r\n        setOtherUserTyping(true);\r\n      }\r\n    });\r\n\r\n    socketService.on('user-stop-typing', (data) => {\r\n      if (data.userId === otherUser._id) {\r\n        console.log('‚å®Ô∏è Other user stopped typing');\r\n        setOtherUserTyping(false);\r\n      }\r\n    });\r\n\r\n    // Message read receipts\r\n    socketService.on('message-read', (data) => {\r\n      console.log('‚úÖ Message read receipt:', data);\r\n      setMessages(prev => prev.map(msg => \r\n        msg._id === data.messageId \r\n          ? { ...msg, status: 'read', readAt: data.readAt }\r\n          : msg\r\n      ));\r\n    });\r\n  };\r\n\r\n  // Cleanup socket listeners\r\n  const cleanupSocketListeners = () => {\r\n    socketService.off('connected');\r\n    socketService.off('disconnected');\r\n    socketService.off('connect_error');\r\n    socketService.off('new-message');\r\n    socketService.off('user-typing');\r\n    socketService.off('user-stop-typing');\r\n    socketService.off('message-read');\r\n  };\r\n\r\n  // Handle sending messages\r\n  const handleSendMessage = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!newMessage.trim() || sending) return;\r\n\r\n    const messageContent = newMessage.trim();\r\n    setNewMessage('');\r\n    setSending(true);\r\n\r\n    try {\r\n      console.log('üì§ Sending message via Socket.io...');\r\n      \r\n      // Send via socket for real-time delivery\r\n      if (socketService.isConnected()) {\r\n        await socketService.sendMessage(otherUser._id, messageContent);\r\n        console.log('‚úÖ Message sent via Socket.io');\r\n      } else {\r\n        // Fallback to HTTP API\r\n        console.log('üì° Socket not connected, using HTTP API...');\r\n        const result = await messageService.sendMessage(otherUser._id, messageContent);\r\n        \r\n        if (result.success) {\r\n          setMessages(prev => [...prev, result.data]);\r\n        } else {\r\n          throw new Error(result.error);\r\n        }\r\n      }\r\n\r\n      // Stop typing\r\n      socketService.stopTyping(otherUser._id);\r\n      setIsTyping(false);\r\n\r\n    } catch (error) {\r\n      console.error('‚ùå Failed to send message:', error);\r\n      // Restore message on error\r\n      setNewMessage(messageContent);\r\n      alert('Failed to send message. Please try again.');\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  // Handle typing indicators\r\n  const handleTyping = (e) => {\r\n    setNewMessage(e.target.value);\r\n\r\n    if (!isTyping && e.target.value.trim()) {\r\n      setIsTyping(true);\r\n      socketService.startTyping(otherUser._id);\r\n    }\r\n\r\n    // Clear existing timeout\r\n    if (typingTimeoutRef.current) {\r\n      clearTimeout(typingTimeoutRef.current);\r\n    }\r\n\r\n    // Set new timeout\r\n    typingTimeoutRef.current = setTimeout(() => {\r\n      if (isTyping) {\r\n        setIsTyping(false);\r\n        socketService.stopTyping(otherUser._id);\r\n      }\r\n    }, 2000);\r\n  };\r\n\r\n  // Format message time\r\n  const formatTime = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  };\r\n\r\n  // Get connection status display\r\n  const getConnectionStatusDisplay = () => {\r\n    switch (connectionStatus) {\r\n      case 'connected':\r\n        return <span className=\"status-connected\">üü¢ Real-time</span>;\r\n      case 'disconnected':\r\n        return <span className=\"status-disconnected\">üî¥ Disconnected</span>;\r\n      case 'error':\r\n        return <span className=\"status-error\">‚ùå Connection Error</span>;\r\n      default:\r\n        return <span className=\"status-connecting\">üü° Connecting...</span>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"realtime-chat\">\r\n      <div className=\"chat-header\">\r\n        <div className=\"user-info\">\r\n          <img \r\n            src={otherUser.avatar || '/default-avatar.png'} \r\n            alt={otherUser.name}\r\n            className=\"user-avatar\"\r\n          />\r\n          <div>\r\n            <h3>{otherUser.name}</h3>\r\n            <span className=\"user-role\">{otherUser.role}</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"chat-status\">\r\n          {getConnectionStatusDisplay()}\r\n        </div>\r\n        <button className=\"close-btn\" onClick={onClose}>‚úï</button>\r\n      </div>\r\n\r\n      <div className=\"messages-container\">\r\n        {messages.length === 0 ? (\r\n          <div className=\"no-messages\">\r\n            <p>Start your conversation with {otherUser.name}</p>\r\n          </div>\r\n        ) : (\r\n          messages.filter(message => message && (message._id || message.messageId)).map((message) => {\r\n            // Safe way to get sender ID with null checks\r\n            const senderId = message.senderId?._id || message.senderId || message.sender?._id || message.sender;\r\n            const isSentByMe = senderId === user.id || senderId === user._id;\r\n            \r\n            return (\r\n              <div\r\n                key={message._id || message.messageId || Math.random()}\r\n                className={`message ${isSentByMe ? 'sent' : 'received'}`}\r\n              >\r\n                <div className=\"message-content\">\r\n                  <p>{message.content || 'Message content unavailable'}</p>\r\n                  <div className=\"message-meta\">\r\n                    <span className=\"message-time\">{formatTime(message.createdAt || message.timestamp)}</span>\r\n                    {isSentByMe ? (\r\n                      <span className={`message-status ${message.status || 'sent'}`}>\r\n                        {message.status === 'read' ? '‚úì‚úì' : '‚úì'}\r\n                      </span>\r\n                    ) : null}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        )}\r\n        \r\n        {otherUserTyping && (\r\n          <div className=\"typing-indicator\">\r\n            <div className=\"typing-dots\">\r\n              <span></span>\r\n              <span></span>\r\n              <span></span>\r\n            </div>\r\n            <p>{otherUser.name} is typing...</p>\r\n          </div>\r\n        )}\r\n        \r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      <form className=\"message-form\" onSubmit={handleSendMessage}>\r\n        <div className=\"input-container\">\r\n          <input\r\n            type=\"text\"\r\n            value={newMessage}\r\n            onChange={handleTyping}\r\n            placeholder=\"Type your message...\"\r\n            disabled={sending}\r\n            className=\"message-input\"\r\n          />\r\n          <button \r\n            type=\"submit\" \r\n            disabled={!newMessage.trim() || sending}\r\n            className=\"send-btn\"\r\n          >\r\n            {sending ? '‚è≥' : 'üì§'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RealTimeChat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}