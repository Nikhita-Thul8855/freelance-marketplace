{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useSearchParams,Link,useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import PaymentService from'../services/paymentService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PaymentSuccess=()=>{const[searchParams]=useSearchParams();const{isAuthenticated}=useAuth();const navigate=useNavigate();const[order,setOrder]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{if(!isAuthenticated){navigate('/login');return;}const sessionId=searchParams.get('session_id');if(!sessionId){setError('Invalid payment session');setLoading(false);return;}handlePaymentSuccess(sessionId);},[searchParams,isAuthenticated,navigate]);const handlePaymentSuccess=async sessionId=>{try{const response=await PaymentService.handlePaymentSuccess(sessionId);if(response.success){setOrder(response.data.order);}else{setError('Failed to process payment');}}catch(error){console.error('Payment success error:',error);setError(error.message);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600\",children:\"Processing your payment...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 text-red-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Payment Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(Link,{to:\"/gigs\",className:\"block w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors\",children:\"Browse Gigs\"}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"block w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-lg transition-colors\",children:\"Go to Dashboard\"})]})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl w-full bg-white rounded-lg shadow-lg p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-10 h-10 text-green-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-2\",children:\"Payment Successful!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600\",children:\"Your order has been confirmed\"})]}),order&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-4\",children:\"Order Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Order ID\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:order.id})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Amount Paid\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900\",children:[\"$\",order.amount]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Gig Title\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:order.gigTitle})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Freelancer\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:order.freelancerName})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Expected Delivery\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:new Date(order.deliveryDate).toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Status\"}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:order.status})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-lg p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-blue-900 mb-3\",children:\"What happens next?\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"space-y-2 text-sm text-blue-800\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex-shrink-0 w-5 h-5 bg-blue-200 rounded-full flex items-center justify-center mr-3 mt-0.5\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold\",children:\"1\"})}),\"The freelancer has been notified and will start working on your project\"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex-shrink-0 w-5 h-5 bg-blue-200 rounded-full flex items-center justify-center mr-3 mt-0.5\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold\",children:\"2\"})}),\"You can track progress and communicate via your dashboard\"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex-shrink-0 w-5 h-5 bg-blue-200 rounded-full flex items-center justify-center mr-3 mt-0.5\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold\",children:\"3\"})}),\"The project will be delivered by the expected date\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-3\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-colors text-center\",children:\"View My Orders\"}),/*#__PURE__*/_jsx(Link,{to:\"/gigs\",className:\"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-3 px-6 rounded-lg transition-colors text-center\",children:\"Browse More Gigs\"})]})]})});};export default PaymentSuccess;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}