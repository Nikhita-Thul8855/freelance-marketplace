{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link,useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import orderService from'../services/orderService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrderDetails=()=>{var _order$gig,_order$gig2,_order$gig3,_order$gig4,_order$gig5,_order$client,_order$client$name,_order$client2,_order$client3,_order$freelancer,_order$freelancer$nam,_order$freelancer2,_order$freelancer3;const{id}=useParams();const{user}=useAuth();const navigate=useNavigate();const[order,setOrder]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[updating,setUpdating]=useState(false);useEffect(()=>{fetchOrder();},[id]);const fetchOrder=async()=>{setLoading(true);setError(null);const result=await orderService.getOrderById(id);if(result.success){setOrder(result.data);}else{setError(result.error);}setLoading(false);};const handleStatusUpdate=async newStatus=>{setUpdating(true);const result=await orderService.updateOrderStatus(id,newStatus);if(result.success){setOrder(result.data);}else{setError(result.error);}setUpdating(false);};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'});};const formatPrice=price=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(price);};const getAvailableActions=()=>{if(!order)return[];const actions=[];if((user===null||user===void 0?void 0:user.role)==='freelancer'){if(order.status==='paid'){actions.push({label:'Start Work',status:'in_progress',className:'bg-blue-600 hover:bg-blue-700 text-white',icon:'ðŸš€'});}else if(order.status==='in_progress'){actions.push({label:'Mark as Completed',status:'completed',className:'bg-green-600 hover:bg-green-700 text-white',icon:'âœ…'});}if(order.status!=='completed'&&order.status!=='cancelled'){actions.push({label:'Cancel Order',status:'cancelled',className:'bg-red-600 hover:bg-red-700 text-white',icon:'âŒ'});}}else if((user===null||user===void 0?void 0:user.role)==='client'){if(order.status!=='completed'&&order.status!=='cancelled'){actions.push({label:'Cancel Order',status:'cancelled',className:'bg-red-600 hover:bg-red-700 text-white',icon:'âŒ'});}}return actions;};const getStatusIcon=status=>{const icons={pending:'â³',paid:'ðŸ’³',in_progress:'ðŸ”„',completed:'âœ…',cancelled:'âŒ',refunded:'ðŸ’°'};return icons[status]||'ðŸ“‹';};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading order details...\"})]})});}if(error||!order){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 text-red-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:\"Order Not Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:error||'The order you are looking for does not exist.'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/orders'),className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",children:\"Back to Orders\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"py-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"md:flex md:items-center md:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"flex space-x-4 text-sm text-gray-500 mb-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"hover:text-gray-700\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"span\",{children:\"/\"}),/*#__PURE__*/_jsx(Link,{to:\"/orders\",className:\"hover:text-gray-700\",children:\"Orders\"}),/*#__PURE__*/_jsx(\"span\",{children:\"/\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-900\",children:order.orderId})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl\",children:\"Order Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:getStatusIcon(order.status)}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-medium \".concat(orderService.getStatusColor(order.status)),children:orderService.getStatusText(order.status)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 flex space-x-3 md:mt-0 md:ml-4\",children:getAvailableActions().map((action,index)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleStatusUpdate(action.status),disabled:updating,className:\"px-4 py-2 rounded-md text-sm font-medium \".concat(action.className,\" disabled:opacity-50\"),children:[updating?'â³':action.icon,\" \",action.label]},index))})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 bg-red-50 border border-red-200 rounded-md p-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:error})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:\"Service Details\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-4\",children:[((_order$gig=order.gig)===null||_order$gig===void 0?void 0:_order$gig.images)&&order.gig.images.length>0&&/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:5000\".concat(order.gig.images[0]),alt:order.gig.title,className:\"w-20 h-20 object-cover rounded-lg\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:(_order$gig2=order.gig)===null||_order$gig2===void 0?void 0:_order$gig2.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:(_order$gig3=order.gig)===null||_order$gig3===void 0?void 0:_order$gig3.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"bg-gray-100 px-2 py-1 rounded\",children:(_order$gig4=order.gig)===null||_order$gig4===void 0?void 0:_order$gig4.category}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDCC5 \",(_order$gig5=order.gig)===null||_order$gig5===void 0?void 0:_order$gig5.deliveryTime,\" days delivery\"]})]})]})]})})]}),(order.requirements||order.notes)&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:\"Project Details\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-4\",children:[order.requirements&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Requirements:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 bg-gray-50 p-4 rounded-lg\",children:order.requirements})]}),order.notes&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Additional Notes:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 bg-gray-50 p-4 rounded-lg\",children:order.notes})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:\"Order Timeline\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flow-root\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"-mb-8\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"relative pb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex h-8 w-8 items-center justify-center rounded-full bg-blue-500\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm\",children:\"\\uD83D\\uDCCB\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"min-w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:\"Order created\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:formatDate(order.createdAt)})]})})]})})}),order.status!=='pending'&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"relative pb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex h-8 w-8 items-center justify-center rounded-full bg-green-500\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm\",children:\"\\uD83D\\uDCB3\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"min-w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:\"Payment processed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:formatDate(order.createdAt)})]})})]})})}),order.completedAt&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex h-8 w-8 items-center justify-center rounded-full bg-green-500\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm\",children:\"\\u2705\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"min-w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900\",children:\"Order completed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:formatDate(order.completedAt)})]})})]})})})]})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:\"Order Summary\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Order ID:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-mono text-sm\",children:order.orderId})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Amount:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-green-600 text-lg\",children:formatPrice(order.amount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Payment Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium capitalize\",children:order.paymentStatus})]}),order.deliveryDate&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Expected Delivery:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatDate(order.deliveryDate)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:\"Participants\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Client\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold text-sm\",children:(_order$client=order.client)===null||_order$client===void 0?void 0:(_order$client$name=_order$client.name)===null||_order$client$name===void 0?void 0:_order$client$name.charAt(0).toUpperCase()})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:(_order$client2=order.client)===null||_order$client2===void 0?void 0:_order$client2.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:(_order$client3=order.client)===null||_order$client3===void 0?void 0:_order$client3.email})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Freelancer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 bg-green-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold text-sm\",children:(_order$freelancer=order.freelancer)===null||_order$freelancer===void 0?void 0:(_order$freelancer$nam=_order$freelancer.name)===null||_order$freelancer$nam===void 0?void 0:_order$freelancer$nam.charAt(0).toUpperCase()})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:(_order$freelancer2=order.freelancer)===null||_order$freelancer2===void 0?void 0:_order$freelancer2.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:(_order$freelancer3=order.freelancer)===null||_order$freelancer3===void 0?void 0:_order$freelancer3.email})]})]})]})]})]})]})]})]})]});};export default OrderDetails;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}